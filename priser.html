<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SOMI – Priser</title>

  <link rel="stylesheet" href="/css/tokens.css" />
  <link rel="stylesheet" href="/css/base.css" />
  <link rel="stylesheet" href="/css/layout.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/motion.css" />
  <link rel="stylesheet" href="/css/header.css" />
  <link rel="stylesheet" href="/css/footer.css" />
  <link rel="stylesheet" href="/css/prices.css" />

  <script defer src="/js/includes.js"></script>
  <script defer src="/js/site.js"></script>
  <script defer src="/js/i18n.js"></script>
</head>

<body>
  <div data-include="/partials/header.html"></div>

  <main>
    <!-- HERO -->
    <section class="section prices-hero">
      <div class="container">
        <div class="reveal">
          <div class="kicker">Priser</div>
          <h1 class="h1">Ryddig oversikt.</h1>
          <p class="muted">
            Finn behandling raskt med søk eller filter. Prislisten er veiledende – endelig pris avklares ved konsultasjon.
          </p>
        </div>

        <!-- TOOLBAR -->
        <div class="toolbar reveal" style="margin-top:22px;">
          <label class="field" aria-label="Søk i priser">
            <span style="opacity:.65;">Søk</span>
            <input id="priceSearch" type="search" placeholder="Søk etter behandling…" autocomplete="off" />
          </label>

          <label class="field" aria-label="Velg kategori">
            <span style="opacity:.65;">Kategori</span>
            <select id="categorySelect">
              <option value="all">Alle</option>
              <option value="injeksjoner">Injeksjoner</option>
              <option value="hud">Hud</option>
              <option value="laser">Laser</option>
              <option value="konsultasjon">Konsultasjon</option>
            </select>
          </label>

          <a class="btn btn--primary" href="/booking.html">BOOK TIME</a>
        </div>

        <div class="note reveal">
          Tips: skriv “botox”, “filler”, “laser” eller “konsultasjon”.
        </div>

        <div id="emptyState" class="empty-state" style="display:none;">
          Ingen treff. Prøv et annet søk eller velg “Alle”.
        </div>
      </div>
    </section>

    <!-- PRICES LIST -->
    <section class="section section--tight">
      <div class="container">

        <!-- KATEGORI: KONSULTASJON -->
        <div class="category reveal" data-category="konsultasjon">
          <div class="category__head">
            <h2 class="h2" style="margin:0;">Konsultasjon</h2>
            <span class="badge">Oppdateres ved behov</span>
          </div>

          <div class="table-wrap">
            <table class="prices-table" aria-label="Priser – Konsultasjon">
              <thead>
                <tr>
                  <th>Behandling</th>
                  <th class="col-time">Tid</th>
                  <th class="col-price">Pris</th>
                </tr>
              </thead>
              <tbody>
                <!-- Bytt ut radene under med dagens innhold -->
                <tr data-name="Konsultasjon" data-tags="konsultasjon vurdering plan">
                  <td>
                    <div class="name">Konsultasjon</div>
                    <div class="sub">Gjennomgang, anbefaling og behandlingsplan.</div>
                  </td>
                  <td class="col-time">15–30 min</td>
                  <td class="col-price">Fra kr 0</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- KATEGORI: INJEKSJONER -->
        <div class="category reveal" data-category="injeksjoner" style="margin-top:44px;">
          <div class="category__head">
            <h2 class="h2" style="margin:0;">Injeksjoner</h2>
            <span class="badge">Populært</span>
          </div>

          <div class="table-wrap">
            <table class="prices-table" aria-label="Priser – Injeksjoner">
              <thead>
                <tr>
                  <th>Behandling</th>
                  <th class="col-time">Tid</th>
                  <th class="col-price">Pris</th>
                </tr>
              </thead>
              <tbody>
                <!-- Eksempelrader (erstattes med SOMI-liste) -->
                <tr data-name="Rynkebehandling" data-tags="botox rynker injeksjon panne sinnekråke">
                  <td>
                    <div class="name">Rynkebehandling</div>
                    <div class="sub">Områder tilpasses etter behov.</div>
                  </td>
                  <td class="col-time">15–20 min</td>
                  <td class="col-price">Fra kr —</td>
                </tr>

                <tr data-name="Filler" data-tags="filler lepper kinn kjeve kontur">
                  <td>
                    <div class="name">Filler</div>
                    <div class="sub">Volum / kontur etter konsultasjon.</div>
                  </td>
                  <td class="col-time">30–45 min</td>
                  <td class="col-price">Fra kr —</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- KATEGORI: HUD -->
        <div class="category reveal" data-category="hud" style="margin-top:44px;">
          <div class="category__head">
            <h2 class="h2" style="margin:0;">Hud</h2>
            <span class="badge">Skreddersys</span>
          </div>

          <div class="table-wrap">
            <table class="prices-table" aria-label="Priser – Hud">
              <thead>
                <tr>
                  <th>Behandling</th>
                  <th class="col-time">Tid</th>
                  <th class="col-price">Pris</th>
                </tr>
              </thead>
              <tbody>
                <tr data-name="Hudforbedring" data-tags="hud peel glød behandling">
                  <td>
                    <div class="name">Hudforbedring</div>
                    <div class="sub">Velges basert på hudtype og mål.</div>
                  </td>
                  <td class="col-time">30–60 min</td>
                  <td class="col-price">Fra kr —</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- KATEGORI: LASER -->
        <div class="category reveal" data-category="laser" style="margin-top:44px;">
          <div class="category__head">
            <h2 class="h2" style="margin:0;">Laser</h2>
            <span class="badge">Trygg protokoll</span>
          </div>

          <div class="table-wrap">
            <table class="prices-table" aria-label="Priser – Laser">
              <thead>
                <tr>
                  <th>Behandling</th>
                  <th class="col-time">Tid</th>
                  <th class="col-price">Pris</th>
                </tr>
              </thead>
              <tbody>
                <tr data-name="Laserbehandling" data-tags="laser pigment hårfjerning hud">
                  <td>
                    <div class="name">Laserbehandling</div>
                    <div class="sub">Pris varierer etter område.</div>
                  </td>
                  <td class="col-time">15–45 min</td>
                  <td class="col-price">Fra kr —</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- CTA -->
        <div class="card reveal" style="margin-top:54px;">
          <div class="card__inner" style="display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap;">
            <div>
              <div class="kicker">Klar for å bestille?</div>
              <div class="h2" style="margin:6px 0 0;">Vi hjelper deg å velge riktig.</div>
            </div>
            <a class="btn btn--primary" href="/booking.html">BOOK TIME</a>
          </div>
        </div>

      </div>
    </section>
  </main>

  <div data-include="/partials/footer.html"></div>

  <!-- Page script: search + category filtering -->
  <script>
    (function () {
      const search = document.getElementById("priceSearch");
      const select = document.getElementById("categorySelect");
      const empty = document.getElementById("emptyState");

      const categories = Array.from(document.querySelectorAll(".category"));
      const rows = Array.from(document.querySelectorAll("tbody tr[data-name]"));

      function normalize(s) {
        return (s || "").toLowerCase().trim();
      }

      function applyFilter() {
        const q = normalize(search.value);
        const c = select.value;

        // category visibility
        categories.forEach(cat => {
          const matchCat = (c === "all") || (cat.dataset.category === c);
          cat.style.display = matchCat ? "" : "none";
        });

        // row visibility (within visible categories)
        let visibleRows = 0;

        rows.forEach(tr => {
          const cat = tr.closest(".category");
          const catVisible = cat && cat.style.display !== "none";
          if (!catVisible) {
            tr.style.display = "none";
            return;
          }

          const name = normalize(tr.dataset.name);
          const tags = normalize(tr.dataset.tags);
          const hit = !q || name.includes(q) || tags.includes(q);

          tr.style.display = hit ? "" : "none";
          if (hit) visibleRows++;
        });

        // hide categories with no visible rows (clean)
        categories.forEach(cat => {
          if (cat.style.display === "none") return;
          const anyVisible = Array.from(cat.querySelectorAll("tbody tr[data-name]"))
            .some(tr => tr.style.display !== "none");
          cat.style.display = anyVisible ? "" : "none";
        });

        empty.style.display = (visibleRows === 0) ? "" : "none";
      }

      search && search.addEventListener("input", applyFilter);
      select && select.addEventListener("change", applyFilter);

      // initial
      applyFilter();
    })();
  </script>
</body>
</html>
